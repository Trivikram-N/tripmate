{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ place.title }} | TripMate</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        body {
            background: url("https://images.unsplash.com/photo-1507525428034-b723cf961d3e") no-repeat center center/cover;
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.6rem;
            color: #0078ff !important;
            text-shadow: 0 0 10px #0078ff;
        }

        .travel-image {
            width: 50px;
            height: 50px;
            margin-left: 10px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0% {
                transform: translateY(0)
            }

            50% {
                transform: translateY(-10px)
            }

            100% {
                transform: translateY(0)
            }
        }

        .destination-header img {
            width: 360px;
            height: 250px;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.4);
        }

        .card {
            border: none;
            border-radius: 14px;
            transition: .3s;
        }

        .card:hover {
            transform: translateY(-6px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, .2);
        }

        .att-card {
            height: 25rem;
        }

        .att-img {
            height: 16rem;
            object-fit: cover;
        }

        i {
            color: rgb(45, 45, 45);
        }
    </style>
</head>

<body>

    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg bg-light shadow-sm">
        <div class="container">
            <a class="navbar-brand d-flex align-items-center" href="{% url 'places' %}">
                TripMate
                <img src="https://cdn-icons-png.flaticon.com/512/201/201623.png" alt="Travel" class="travel-image">
            </a>

            <div class="ms-auto">
                <a href="{% url 'places' %}" class="btn btn-outline-primary me-2">üè† Back to Home</a>
                <a href="{% url 'liked' %}" class="btn btn-outline-danger me-2">‚ù§Ô∏è Liked</a>

                {% if user.is_authenticated %}
                <a href="{% url 'logout' %}" class="btn btn-primary">Logout</a>
                {% else %}
                <a href="{% url 'login' %}" class="btn btn-primary">Login</a>
                {% endif %}

            </div>
        </div>
    </nav>


    <div class="container mt-5">

        <!-- HEADER -->
        <div class="row destination-header">
            <div class="col-md-7">
                <h2 class="fw-bold">{{ place.title }}</h2>
                <p>{{ place.description }}</p>
                <p class="text-muted">{{ place.summary }}</p>
            </div>

            <div class="col-md-5">
                <img src="{{ place.image.url }}" alt="{{ place.title }}">
            </div>
        </div>


        <!-- INFO -->
        <div class="row mt-4">
            <div class="col-md-4"><strong>Category:</strong>
                {% for cat in place.category.all %}
                {{ cat.name }} ,
                {% endfor %}
            </div>
            <div class="col-md-4"><strong>Climate:</strong> {{ place.climate }}</div>
            <div class="col-md-4"><strong>Best Time:</strong> {{ place.best_time }}</div>
        </div>


        <!-- ATTRACTIONS -->
        <h4 class="fw-bold mt-5 mb-3">Top Attractions</h4>
        <div class="row g-4">
            {% for a in place.attractions.all %}
            <div class="col-md-4">
                <div class="card att-card">
                    <img src="{{ a.image.url }}" alt="{{ a.image.url }}" class="card-img-top att-img">

                    <div class="card-body">
                        <h6 class="fw-bold mb-1">{{ a.name }}</h6>
                        <p class="text-muted small">{{ a.description }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>


        <!-- RATING -->
        <div class="mt-5">
            <h5 class="fw-bold">Rating of this Destination</h5>

            <p class="text-muted d-inline me-2" id="ratingValue">{{ place.rating }}</p>
            <div id="stars" class="d-inline" data-rating="{{ place.rating }}"></div>

            <div class="card mt-3">
                <div class="card-body">
                    <p class="card-text text-center">"{{ place.review|default:"No reviews yet." }}"</p>
                </div>
            </div>
        </div>

    </div>


    <footer class="text-center p-3 bg-light mt-5">
        ¬© 2025 TripMate. All rights reserved.
    </footer>


    <script>
        const starContainer = document.getElementById('stars');
        const rating = parseFloat(starContainer.dataset.rating);

        let stars = '';
        for (let i = 1; i <= 5; i++) {
            if (rating >= i) {
                stars += '<i class="fa-solid fa-star"></i>';
            } else if (rating >= i - 0.5) {
                stars += '<i class="fa-solid fa-star-half-stroke"></i>';
            } else {
                stars += '<i class="fa-regular fa-star"></i>';
            }
        }
        starContainer.innerHTML = stars;
    </script>

</body>

</html>